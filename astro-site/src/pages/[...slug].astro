---
import { getLiveEntry } from "astro:content";
import Layout from "../layouts/Layout.astro";
import BlockRenderer, { type Block } from "../components/BlockRenderer.astro";

const { slug } = Astro.params;

console.log("fetching page", slug);

if (!slug) {
  throw new Error("Slug is required");
}

const { entry } = await getLiveEntry("pages", slug);

if (!entry) {
  throw new Error("Page not found");
}
---

<Layout>
  <BlockRenderer blocks={entry.data.blocks as Block[]} />
</Layout>
